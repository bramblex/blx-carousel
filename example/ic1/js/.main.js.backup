(function(){


  var current_page = 1;
  var carousel = $('.blx-carousel');
  var carousel_slider = $('.blx-carousel-slider');
  var carousel_page = $('.blx-carousel-page');
  var carousel_page_length = carousel_page.length;

  //var page_animate = {
    //p1 : {
      //in : function(callback){},
      //out : function(callback){},
    //},
  //};

  var page_convert_lock = 1;

  $.fn.fadeIn = function(){
    page_convert_lock = 0;
    $(this).show();
    $(this).addClass('animated fadeIn');
    $(this).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
      $(this).removeClass('animated fadeIn');
      page_convert_lock = 1;
    });
  }

  $.fn.fadeOut= function(){
    page_convert_lock = 0;
    $(this).addClass('animated fadeOut fast');
    $(this).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
      $(this).removeClass('animated fadeOut fast');
      $(this).hide();
      page_convert_lock = 1;
    });
  }

  $.fn.fadeInRight = function(){
    page_convert_lock = 0;
    $(this).show();
    $(this).addClass('animated fadeInRight');
    $(this).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
      $(this).removeClass('animated fadeInRight');
      page_convert_lock = 1;
    });
  }

  $.fn.fadeInLeft = function(){
    page_convert_lock = 0;
    $(this).show();
    $(this).addClass('animated fadeInLeft');
    $(this).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
      $(this).removeClass('animated fadeInLeft');
      page_convert_lock = 1;
    });
  }

  $.fn.fadeOutRight = function(){
    page_convert_lock = 0;
    $(this).addClass('animated fadeOutRight fast');
    $(this).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
      $(this).removeClass('animated fadeOutRight fast');
      $(this).hide();
      page_convert_lock = 1;
    });
  }

  $.fn.fadeOutLeft = function(){
    page_convert_lock = 0;
    $(this).addClass('animated fadeOutLeft fast');
    $(this).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
      $(this).removeClass('animated fadeOutLeft fast');
      $(this).hide();
      page_convert_lock = 1;
    });
  }

  var initializeSize = function(){

    var body_width = window.innerWidth;
    var body_height = window.innerHeight;


    console.log(body_width, body_height);


    carousel_page.width(body_width);
    carousel_page.height(body_height);

    carousel.width(carousel_page.width());
    carousel.height(body_height);

    //for (var i = 0; i < carousel_page_length; i++){
      //carousel_slider.append('<i class="fa fa-circle"></i>');
    //}

  };


  var nextPage = function(){
    if (current_page < carousel_page_length - 1 && current_page >= 0){
      $(carousel_page[current_page]).fadeOutLeft();
      current_page = current_page + 1;
      $(carousel_page[current_page]).fadeInRight();
    }
  };

  var previousPage = function(){
    if (current_page < carousel_page_length && current_page > 0){
      $(carousel_page[current_page]).fadeOutRight();
      current_page = current_page - 1;
      $(carousel_page[current_page]).fadeInLeft();
    }
  };

  var registerEvent = function(){

    $('.blx-carousel').swipeLeft(function(){
      console.log('swipeLeft');
      if( page_convert_lock )
        nextPage();
    });

    $('.blx-carousel').swipeRight(function(){
      console.log('swipeRight');
      if( page_convert_lock )
        previousPage();
    });

    $(window).resize(initializeSize);

  }

  var onReady = function(){
    initializeSize();
    carousel_page.hide();
    $(carousel_page[current_page]).show();

    registerEvent();
  };

  $(document).ready(onReady);
})()
